# -*- python -*-
Import('env')
Import('libProducts')
Import('cacheObjs')

import os
import itertools


programs = []

libObjs = cacheObjs(env, libProducts['proto'], ".o")
extDeps = ['pthread', 'protobuf', 'libssl', 'libcrypto', 'log', 'log4cxx']

p = env.Program(["testProtocol.cc"] + libObjs, LIBS=extDeps)
programs.append(p)

# add a unit test which runs on every build
utest = env.UnitTest(p)
env.Append(UNIT_TESTS=utest)

Return('programs')

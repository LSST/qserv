# -*- python -*-
Import('env')
Import('libProducts')
Import('cacheObjs')
Import('defaultTgts')
Import('findLibs')

import os
import itertools


programs = []
# extDeps
extDeps = "mysqlclient_r boost_thread boost_system ssl crypto log log4cxx".split()

modDeps = 'mysql sql util'.split() # deps on other modules
deps = itertools.chain(libProducts['qmeta'], *[defaultTgts[m] for m in modDeps])
deps = list(deps) # un-chain
deps = cacheObjs(env, deps, ".o")
deps.sort(key=str)  # Prevent dependency-order change rebuilding.
p = env.Program(['testQMeta.cc'] + deps,
                LIBS=findLibs(extDeps))
programs.append(p)

Return('programs')

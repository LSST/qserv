# -*- python -*-
Import('env')
Import('libProducts')
Import('cacheObjs')

import os
import itertools


programs = []

libObjs = cacheObjs(env, libProducts['proto'], ".o")
ubuntuDeps=['pthread']
# libcrypto MUST be at the end of the list in order to build successfully on Ubuntu 14.04
extDeps = ['protobuf', 'libssl'] + ubuntuDeps + ['libcrypto'] + "log log4cxx".split()

p = env.Program(["testProtoRowBuffer.cc"] + libObjs, LIBS=extDeps)
programs.append(p)

# add a unit test which runs on every build
utest = env.UnitTest(p)
env.Append(UNIT_TESTS=utest)

Return('programs')
